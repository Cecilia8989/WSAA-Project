<!--https://blog.hubspot.com/website/html-space - aggiungere spazi -->
<!--https://dev.to/urstrulyvishwak/why-transformtranslate-50-50-to-center-element-15m1 - centrare -->

{% extends "base.html" %}

{% block title %}
Employees_Database
{% endblock %}

{% block content %}
<head>
<style>
    /* CSS for centering content */
    #cent{
      position: absolute;
      left: 50%;
      transform: translate(-50%);
    }
</style>
</head>

<head>
    <title>Employees Database</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<h3 align="center">Employees Databases</h3>
<div id="cent">
    <fieldset style="background: #f6f8ff; border: 2px solid #4238ca; width: 600px; padding: 20px">
    <table border="1",align="center", id="employeeTable">
        <tr>
            <th><span style="margin: 0 10px;">Id</span></th>
            <th><span style="margin: 0 10px;">First Name</span></th>
            <th><span style="margin: 0 10px;">Last Name</span></th>
            <th><span style="margin: 0 10px;">Employee ID</span></th>         
        </tr>
    </table>
    <br/>
</div>

<script>
    function getAllAjax(){
        $.ajax({
            "url": "/employees",
            "method":"GET",
            "dataType": "json",
            "success":function(result){
                result.forEach(function(employee) {
                    addEmployeeToTable(employee);
                });
            },
            "error":function(xhr,status,error){
                console.log("error: "+status+" msg:"+error);
            }
        });
    }

    function addEmployeeToTable(employee){
        var tableElement = document.getElementById('employeeTable');
        var rowElement = tableElement.insertRow(-1);
        rowElement.setAttribute('id', employee.id);
        var cell1 = rowElement.insertCell(0);
        cell1.innerHTML = employee.id;
        var cell2 = rowElement.insertCell(1);
        cell2.innerHTML = employee["First Name"];
        var cell3 = rowElement.insertCell(2);
        cell3.innerHTML = employee["Second Name"];
        var cell4 = rowElement.insertCell(3);
        cell4.innerHTML = employee["Employee ID"];
    }

    // Call the getAllAjax() function when the page loads
    getAllAjax();
</script>
{% endblock %}